
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="/public/css/chat.css">
  </head>
  <body>
    <div class="row content h-100" style="height:100%;">
      <div class="col-md-3 d-sm-none d-none d-md-block text-center sidenav  h-100" style="min-height: 100%;overflow-y: scroll;">
        <strong>People In Room</strong><br>
        <div class="usersList">
        </div>
      </div>
      <div class="col-md-9 col-sm-12  h-100 letsChat">
		<h2 id="infoOnLogin">Please select a user</h2>
		<div style="background-color: #66a6ff; padding: 1%; color: #fff; margin-bottom: 1%; display: flex; flex-direction: row">
					
      	<h3 id="currentReceiver" style="margin-left: 44%;">
      	</h3>
   		<form action="/logout" method="post" style="margin-left: auto; display: inline;">
   		<button type="submit">Logout</button>
   		</form>
		</div>
        <span class="minicontrol d-block d-sm-block d-md-none" onclick="openNav()">&#9776;</span>
        <div id="msgs_recieved" style="max-height: 75%; overflow-y: auto; padding-right: 5%;">
        </div>
        <div class="container-fluid msg_footer" id="msgs_sent">
          <form id="msg_form">
            <input type="text" class="form-control" id="msg_txt"  placeholder="Type A Message" autofocus autocomplete="off">
            <br>
            <button type="button" class="btn" id="send_msg" onclick="javascript:void(0)">Send Message</button><br>
          </form>
        </div>
      </div>


    </div>
    <div id="mySidenav" class="mininav text-center hidden-md-up">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <strong>People In Room</strong><br>
      <div class="usersList">
      </div>
    </div>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">
      var username = undefined;
      var currentUser = undefined;
      var chatPartner = undefined;
    </script>
  
   
    <script type="text/javascript" src="/public/js/subscribe.js"></script>
    <script type="text/javascript" src="/public/js/chat.js"></script>
    
    
    <!--  websockets -->
    
    <div class="events"></div>
<script>
    var clientWebSocket = new WebSocket("ws://localhost:8080/event-emitter");
    clientWebSocket.onopen = function() {
        console.log("clientWebSocket.onopen", clientWebSocket);
        console.log("clientWebSocket.readyState", "websocketstatus");
        clientWebSocket.send("event-me-from-browser");
    }
    clientWebSocket.onclose = function(error) {
        console.log("clientWebSocket.onclose", clientWebSocket, error);
        events("Closing connection");
    }
    clientWebSocket.onerror = function(error) {
        console.log("clientWebSocket.onerror", clientWebSocket, error);
        events("An error occured");
    }
    clientWebSocket.onmessage = function(error) {
        console.log("clientWebSocket.onmessage", clientWebSocket, error);
        events(error.data);
    }
    function events(responseEvent) {
        document.querySelector(".events").innerHTML += responseEvent + "<br>";
    }
</script>
    

  </body>
</html>
